(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2363:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>y});var r=l(5155),i=l(2115);let n=e=>{let{value:t,isValidMove:l=!1,isFlipped:i=!1,isPreviewing:n=!1,previewingFrom:s=!1,onClick:a,onHover:c,discColors:o={black:"bg-black",white:"bg-white"},isAIMoving:u=!1}=e,h=n&&s?"opacity-50 scale-90":"",d=null;return"black"===t&&(d=(0,r.jsx)("div",{className:"w-8 h-8 rounded-full ".concat(o.black," ").concat(h," transition-all")})),"white"===t&&(d=(0,r.jsx)("div",{className:"w-8 h-8 rounded-full ".concat(o.white," border ").concat(h," transition-all")})),(0,r.jsx)("div",{className:"".concat("w-10 h-10 border border-gray-600 flex items-center justify-center transition duration-200"," ").concat(l&&!u?"bg-yellow-200 cursor-pointer":""," ").concat(i?"ring-2 ring-purple-500":""),onClick:u?void 0:a,onMouseEnter:u?void 0:c,children:d})},s=[[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1]];function a(){let e=Array.from({length:8},()=>Array(8).fill("empty"));return e[3][3]="white",e[3][4]="black",e[4][3]="black",e[4][4]="white",e}function c(e,t){return e>=0&&e<8&&t>=0&&t<8}function o(e,t,l,r,i){let n=[],[s,a]=[t+i[0],l+i[1]];if(!c(s,a)||e[s][a]!==("black"===r?"white":"black"))return[];for(n.push([s,a]);;){if(!c(s+=i[0],a+=i[1])||"empty"===e[s][a])return[];if(e[s][a]===r)return n;n.push([s,a])}}var u=function(e){return e[e.N=0]="N",e[e.NE=1]="NE",e[e.E=2]="E",e[e.SE=3]="SE",e[e.S=4]="S",e[e.SW=5]="SW",e[e.W=6]="W",e[e.NW=7]="NW",e}(u||{});function h(e,t){let l=[];for(let r=0;r<8;r++)for(let i=0;i<8;i++)if("empty"===e[r][i]){for(let n of s)if(o(e,r,i,t,n).length>0){l.push([r,i]);break}}return l}function d(e,t,l,r){let i=e.map(e=>[...e]),n=[];for(let i of s){let s=o(e,t,l,r,i);s.length>0&&n.push(...s)}if(0===n.length)throw Error("Invalid move at (".concat(t,", ").concat(l,") for player ").concat(r));for(let[e,s]of(i[t][l]=r,n))i[e][s]=r;return i}function f(e){let t={black:0,white:0};for(let l of e)for(let e of l)"black"===e&&t.black++,"white"===e&&t.white++;return t}let b=e=>{let{board:t,validMoves:l,currentPlayer:s,onCellClick:a,lastConverted:c=[],discColors:o={black:"bg-black",white:"bg-white"},isAIMoving:u=!1}=e,[h,f]=(0,i.useState)(null),b=(e,t)=>l.some(l=>{let[r,i]=l;return r===e&&i===t}),m=(e,l)=>{if(!b(e,l))return f(null);try{let r=d(t,e,l,s);f(r)}catch(e){f(null)}};return(0,r.jsx)("div",{className:"grid grid-cols-8 gap-0 bg-green-700 p-1",onMouseLeave:()=>f(null),children:t.map((e,t)=>e.map((e,l)=>{var i,s;let d=null!=(s=null==h||null==(i=h[t])?void 0:i[l])?s:e,f=c.some(e=>{let[r,i]=e;return r===t&&i===l});return(0,r.jsx)(n,{value:d,isValidMove:b(t,l),onClick:()=>b(t,l)&&a(t,l),onHover:()=>m(t,l),isFlipped:f,discColors:o,isPreviewing:!!h,previewingFrom:e!==d,isAIMoving:u},"".concat(t,"-").concat(l))}))})},m=e=>{let{scores:t,currentPlayer:l}=e;return(0,r.jsxs)("div",{className:"flex space-x-4 mb-4 text-white",children:[(0,r.jsxs)("div",{className:"black"===l?"font-bold":"",children:["Black: ",t.black]}),(0,r.jsxs)("div",{className:"white"===l?"font-bold":"",children:["White: ",t.white]})]})},g=()=>(0,r.jsx)("header",{className:"mb-6",children:(0,r.jsx)("h1",{className:"text-3xl text-white font-semibold",children:"Reversi Game"})}),v=e=>{let{settings:t,onChange:l}=e;return(0,r.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,r.jsx)("select",{value:t.mode,onChange:e=>{l({...t,mode:e.target.value})},className:"p-2 bg-green hover:bg-green-600 active:bg-green-700 rounded transition-colors",children:["HvsH","HvsAI","AIvsAI"].map(e=>(0,r.jsx)("option",{value:e,children:e},e))}),"HvsH"!==t.mode&&(0,r.jsx)("select",{value:t.difficulty,onChange:e=>{l({...t,difficulty:e.target.value})},className:"p-2 bg-green hover:bg-green-600 active:bg-green-700 rounded transition-colors",children:["easy","medium","hard"].map(e=>(0,r.jsx)("option",{value:e,children:e},e))}),"HvsH"!==t.mode&&(0,r.jsx)("button",{className:"p-2 bg-green hover:bg-green-600 active:bg-green-700 text-white rounded",onClick:()=>l({...t,customWeights:void 0}),children:"Default Heuristics"})]})},x=e=>{let{weights:t,onChange:l}=e;return(0,r.jsx)("div",{className:"space-y-2",children:Object.entries(t).map(e=>{let[i,n]=e;return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("label",{children:i}),(0,r.jsx)("input",{type:"range",min:0,max:5,value:n,onChange:e=>l({...t,[i]:+e.target.value})}),(0,r.jsx)("span",{children:n})]},i)})})},w={discParity:function(e,t){let l=f(e),r=l[t],i=l["black"===t?"white":"black"];return(r-i)/(r+i)},cornerControl:function(e,t){let l=0;return[[0,0],[0,7],[7,0],[7,7]].forEach(r=>{let[i,n]=r;e[i][n]===t?l+=1:"empty"!==e[i][n]&&(l-=1)}),l/4},mobility:function(e,t){let l=h(e,t).length,r=h(e,"black"===t?"white":"black").length;return(l-r)/(l+r+1)}};w.stability=function(e,t){let l=0;for(let r=0;r<8;r++)[[0,r],[7,r],[r,0],[r,7]].forEach(r=>{let[i,n]=r;e[i][n]===t&&l++});return l/28},w.edgeControl=function(e,t){let l=0,r=[[0,1],[1,0],[1,1],[0,6],[1,6],[1,7],[6,0],[6,1],[7,1],[6,6],[6,7],[7,6]];return r.forEach(r=>{let[i,n]=r;e[i][n]===t?l-=1:"empty"!==e[i][n]&&(l+=1)}),l/r.length};let p={easy:{depth:2,weights:{discParity:1,cornerControl:0,mobility:0}},medium:{depth:4,weights:{discParity:1,cornerControl:1,mobility:1}},hard:{depth:6,weights:{discParity:2,cornerControl:3,mobility:2}}};function k(e,t,l){return Object.keys(l).reduce((r,i)=>r+l[i]*w[i](e,t),0)}function y(){let[e,t]=(0,i.useState)(a()),[l,n]=(0,i.useState)("black"),[s,c]=(0,i.useState)([]),[o,u]=(0,i.useState)({black:2,white:2}),[w,y]=(0,i.useState)(!1),[j,N]=(0,i.useState)({mode:"HvsAI",difficulty:"easy"}),[C,A]=(0,i.useState)(p[j.difficulty].weights),[I,S]=(0,i.useState)(p[j.difficulty].weights),[E,H]=(0,i.useState)(!1),[W,M]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(!E)return;let t=h(e,l);if(0===t.length){let t="black"===l?"white":"black";0===h(e,t).length?y(!0):n(t),c([])}else c(t);u(f(e))},[e,l,E]);let P=()=>{if(!E||w)return;let r="AIvsAI"===j.mode&&"black"===l?C:I,i=function(e,t){let{player:l,difficulty:r,customWeights:i}=t,{depth:n,weights:s}=i?{depth:p[r].depth,weights:i}:p[r],{move:a}=function e(t,l,r,i,n,s,a){let c;if(0===r)return{score:k(t,l,s)};let o=h(t,a?l:"black"===l?"white":"black");if(0===o.length)return{score:k(t,l,s)};if(a){let a=-1/0;for(let u of o){let o=e(d(t,u[0],u[1],l),l,r-1,i,n,s,!1);if(o.score>a&&(a=o.score,c=u),(i=Math.max(i,a))>=n)break}return{score:a,move:c}}{let a=1/0,u="black"===l?"white":"black";for(let h of o){let o=e(d(t,h[0],h[1],u),l,r-1,i,n,s,!0);if(o.score<a&&(a=o.score,c=h),i>=(n=Math.min(n,a)))break}return{score:a,move:c}}}(e,l,n,-1/0,1/0,s,!0);return a||null}(e,{player:l,difficulty:j.difficulty,customWeights:r});if(i)try{let r=d(e,i[0],i[1],l);t(r),n(e=>"black"===e?"white":"black")}catch(e){}M(!1)};(0,i.useEffect)(()=>{if(E&&!w){if("HvsAI"===j.mode&&"white"===l){M(!0);let e=setTimeout(()=>{P()},300);return()=>clearTimeout(e)}if("AIvsAI"===j.mode){M(!0);let e=setTimeout(()=>{P()},800);return()=>clearTimeout(e)}}},[e,l,E,j,C,I,w]);let _=e=>{N(e);let l=p[e.difficulty].weights;A(l),S(l),t(a()),n("black"),y(!1),M(!1),H(!0)};return E?(0,r.jsxs)("div",{className:"min-h-screen bg-green-800 p-4",children:[(0,r.jsx)(g,{}),(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)(m,{scores:o,currentPlayer:l}),(0,r.jsx)(b,{board:e,validMoves:s,currentPlayer:l,onCellClick:(r,i)=>{if(E&&!w&&!W&&"AIvsAI"!==j.mode&&("HvsAI"!==j.mode||"white"!==l)&&s.some(e=>{let[t,l]=e;return t===r&&l===i}))try{let s=d(e,r,i,l);t(s),n(e=>"black"===e?"white":"black")}catch(e){}},isAIMoving:W}),w&&(0,r.jsxs)("div",{className:"text-white text-xl",children:["Game Over! Winner:"," ",o.black>o.white?"Black":o.white>o.black?"White":"Tie"]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:()=>{t(a()),n("black"),y(!1),M(!1),H(!1)},className:"px-4 py-2 bg-green-600 hover:bg-green-700 active:bg-green-800 rounded transition-colors",children:"Main Menu"}),(0,r.jsx)("button",{onClick:()=>{t(a()),n("black"),y(!1),M(!1)},className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 rounded",children:"Restart"})]})]})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-lg space-y-6",children:[(0,r.jsx)(g,{}),(0,r.jsx)(v,{settings:j,onChange:e=>{N(e);let t=p[e.difficulty].weights;A(t),S(t)}}),"HvsH"!==j.mode&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-white font-semibold",children:"Black AI"}),(0,r.jsx)(x,{weights:C,onChange:A})]}),"AIvsAI"===j.mode&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-white font-semibold",children:"White AI"}),(0,r.jsx)(x,{weights:I,onChange:S})]})]}),(0,r.jsx)("button",{className:"w-full py-3 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold rounded transition",onClick:()=>_(j),children:"Start Game"})]})})}},5420:(e,t,l)=>{Promise.resolve().then(l.bind(l,2363))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(5420)),_N_E=e.O()}]);